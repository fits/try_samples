package fits.sample

//EventéŒ¾
declare Order
    @role(event)
end

rule "2•bŠÔ‚É’•¶‹àŠz 5ç‰~ˆÈã‚Ìˆ—‚ªI—¹‚µ‚½ê‡‚Éo—Í"
    salience 10
    when
    	$beforeOrder : Order($beforeName : name, totalPrice >= 5000) from entry-point "order stream"
        Order($name : name, totalPrice >= 5000, this finishes[2s] $beforeOrder) from entry-point "order stream"
    then
        System.out.printf("’•¶i5ç‰~ˆÈãj : %s, before = %s \n", $name, $beforeName);
end

rule "’¼‹ß‚Ì3•bŠÔ‚É”­¶‚µ‚½’•¶‚Ì‡Œv‹àŠz‚ª 1–œ5ç‰~ˆÈã‚Ìê‡‚Éo—Í"
    when
        Number($res : intValue, intValue >= 15000) from accumulate(
            Order($total : totalPrice) over window:time(3s) from entry-point "order stream", sum($total)
        )
    then
        System.out.printf("3•bŠÔ‚Ì‡Œv‹àŠzi1–œ5ç‰~ˆÈãj : %d \n", $res);
end

